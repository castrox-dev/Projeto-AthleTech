{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel do Professor • AthleTech</title>
  <link rel="icon" href="{% static 'images/favicon.ico' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-B/Lk5XlU5IgxkpDqKqCFoYD9tiq6qVgqU5gUjJw9MBQNzEiASQL4W5nz7GVaCi6ctX+pMx2k49+bUNK70CklxQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="{% static 'css/professor.css' %}">
  <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
</head>
<body>
  <!-- Menu Mobile CSS Puro -->
  <div class="mobile-nav-container">
    <input class="menu-checkbox" type="checkbox" id="menu-toggle" />
    <div class="hamburger-lines">
      <span class="line line1"></span>
      <span class="line line2"></span>
      <span class="line line3"></span>
    </div>
    <div class="mobile-logo">
      <i class="fa-solid fa-dumbbell"></i>
      <span>ATHLETECH</span>
    </div>
    <div class="menu-overlay" onclick="document.getElementById('menu-toggle').checked = false;"></div>
    <ul class="mobile-menu-items">
      <li class="menu-section">Ações Rápidas</li>
      <li><a href="#" id="mobile-btn-novo-treino"><i class="fa-solid fa-plus"></i> Novo Treino</a></li>
      <li><a href="#" id="mobile-btn-biblioteca"><i class="fa-solid fa-book"></i> Biblioteca</a></li>
      <li><a href="#" id="mobile-btn-nova-avaliacao"><i class="fa-solid fa-calendar-plus"></i> Nova Avaliação</a></li>
      <li class="menu-divider"></li>
      <li><a href="{% url 'torneio' %}"><i class="fa-solid fa-trophy"></i> Torneio</a></li>
      <li><a href="/"><i class="fa-solid fa-house"></i> Início</a></li>
      <li class="menu-buttons">
        <form method="POST" action="{% url 'logout' %}" style="margin: 0;">
          {% csrf_token %}
          <button type="submit" class="btn-menu secondary" style="width: 100%; cursor: pointer;">
            <i class="fa-solid fa-right-from-bracket"></i> Sair
          </button>
        </form>
      </li>
    </ul>
  </div>

  <header class="header">
    <div class="logo">
      <i class="fa-solid fa-dumbbell"></i>
      <span>ATHLETECH • Professor</span>
    </div>
    <div class="header-actions">
      <a href="{% url 'torneio' %}" class="btn outline"><i class="fa-solid fa-trophy"></i>Torneio</a>
      <a href="#" class="btn outline" id="btn-biblioteca"><i class="fa-solid fa-book"></i>Biblioteca de exercícios</a>
      <a href="#" class="btn primary" id="btn-novo-treino"><i class="fa-solid fa-plus"></i>Novo treino</a>
      <form method="POST" action="{% url 'logout' %}" class="logout-form">
        {% csrf_token %}
        <button type="submit" class="btn outline logout-btn"><i class="fa-solid fa-right-from-bracket"></i>Sair</button>
      </form>
    </div>
  </header>

  <main class="main">
    <section class="section">
      <div class="section-header">
        <h1 class="section-title">Resumo rápido</h1>
        <div class="filters">
          <select id="filter-agenda">
            <option>Esta semana</option>
            <option>Últimos 15 dias</option>
            <option>Mês atual</option>
          </select>
          <a href="#" class="btn outline" id="btn-nova-avaliacao">
            <i class="fa-solid fa-calendar-plus"></i>Nova avaliação
          </a>
        </div>
      </div>
      <div class="grid two">
        <article class="card">
          <div class="card-header">
            <h2>Alunos acompanhados</h2>
            <span class="badge"><i class="fa-solid fa-user-group"></i> 37 ativos</span>
          </div>
          <p>3 novos alunos aguardando avaliação inicial.</p>
        </article>
        <article class="card">
          <div class="card-header">
            <h2>Treinos em revisão</h2>
            <span class="badge"><i class="fa-solid fa-pen"></i> 5 ajustes pendentes</span>
          </div>
          <p>Atualize os treinos marcados como "Revisar" pelos alunos.</p>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <h1 class="section-title">Agenda de avaliações</h1>
        <div class="filters">
          <select>
            <option>Todos os professores</option>
            <option>Somente meus alunos</option>
          </select>
        </div>
      </div>
      <div class="timeline">
        <div class="timeline-item">
          <span class="timeline-time">08:30 • 12 MAR</span>
          <div class="timeline-card">
            <strong>Juliana Lopes</strong>
            <p>Reavaliação trimestral • foco: hipertrofia de membros superiores.</p>
            <div class="filters">
              <span class="pill accent"><i class="fa-solid fa-dumbbell"></i> Sala funcional</span>
              <span class="pill success"><i class="fa-solid fa-check"></i> Confirmado</span>
            </div>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-time">10:00 • 13 MAR</span>
          <div class="timeline-card">
            <strong>Rafael Monteiro</strong>
            <p>Avaliação inicial • retorno de lesão de joelho.</p>
            <div class="filters">
              <span class="pill accent"><i class="fa-solid fa-person-running"></i> Reabilitação</span>
            </div>
          </div>
        </div>
        <div class="timeline-item">
          <span class="timeline-time">18:15 • 14 MAR</span>
          <div class="timeline-card">
            <strong>Maria Clara</strong>
            <p>Revisão de treino • foco em resistência cardiorrespiratória.</p>
            <div class="filters">
              <span class="pill accent"><i class="fa-solid fa-heart-pulse"></i> HIIT</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <div class="section-header">
        <h1 class="section-title">Treinos ativos</h1>
        <div class="filters">
          <select id="filter-treinos">
            <option value="">Todos os objetivos</option>
            <option value="ganho">Ganho de massa</option>
            <option value="reabilitação">Reabilitação</option>
            <option value="performance">Performance</option>
          </select>
        </div>
      </div>
      <table class="table" id="treinos-table">
        <thead>
          <tr>
            <th>Aluno</th>
            <th>Objetivo</th>
            <th>Última atualização</th>
            <th>Status</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </section>

    <section class="section">
      <div class="section-header">
        <h1 class="section-title">Alertas do dia</h1>
        <a href="#" class="btn outline" id="btn-atualizar-alertas"><i class="fa-solid fa-rotate"></i>Atualizar</a>
      </div>
      <div class="list">
        <div class="list-item" data-alert-id="avaliacao">
          <div class="info">
            <strong>Avaliação pendente</strong>
            <span>Envie o questionário pré-avaliação para Rafael Monteiro.</span>
          </div>
          <a href="#" class="btn primary btn-alert" data-action="enviar-questionario"><i class="fa-solid fa-paper-plane"></i>Enviar agora</a>
        </div>
        <div class="list-item" data-alert-id="feedback">
          <div class="info">
            <strong>Feedback recebido</strong>
            <span>Larissa Gomes enviou comentários sobre o treino do dia A.</span>
          </div>
          <a href="#" class="btn outline btn-alert" data-action="responder-feedback"><i class="fa-solid fa-message"></i>Responder</a>
        </div>
        <div class="list-item" data-alert-id="expirado">
          <div class="info">
            <strong>Treino expirado</strong>
            <span>Atualize o treino de Diego Nascimento antes de sexta-feira.</span>
          </div>
          <a href="#" class="btn outline btn-alert" data-action="agendar-revisao"><i class="fa-solid fa-calendar"></i>Agendar revisão</a>
        </div>
      </div>
    </section>
  </main>

  <div id="modal-overlay" class="modal-overlay hidden">
    <div class="modal">
      <div class="modal-header">
        <h2 id="modal-title"></h2>
        <button type="button" id="modal-close" class="modal-close" aria-label="Fechar">&times;</button>
      </div>
      <div id="modal-body" class="modal-body"></div>
    </div>
  </div>

  <div id="toast-container" class="toast-container"></div>

  <script>
    window.PROFESSOR_API_CONFIG = {
      treinosEndpoint: "{% url 'treino-gerenciar-list' %}",
      exerciciosEndpoint: "{% url 'exercicios' %}",
      portalAvaliacoesUrl: "{% url 'portal' %}#avaliacoes"
    };
  </script>
  <script src="{% static 'js/professor-dashboard.js' %}"></script>
  <script src="{% static 'js/mobile-menu.js' %}"></script>
  <script>
    // Conectar botões do menu mobile aos originais
    document.addEventListener('DOMContentLoaded', function() {
      const mobileNovoTreino = document.getElementById('mobile-btn-novo-treino');
      const mobileBiblioteca = document.getElementById('mobile-btn-biblioteca');
      const mobileNovaAvaliacao = document.getElementById('mobile-btn-nova-avaliacao');
      
      if (mobileNovoTreino) {
        mobileNovoTreino.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('btn-novo-treino')?.click();
        });
      }
      if (mobileBiblioteca) {
        mobileBiblioteca.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('btn-biblioteca')?.click();
        });
      }
      if (mobileNovaAvaliacao) {
        mobileNovaAvaliacao.addEventListener('click', function(e) {
          e.preventDefault();
          document.getElementById('btn-nova-avaliacao')?.click();
        });
      }
    });
  </script>
</body>
</html>

